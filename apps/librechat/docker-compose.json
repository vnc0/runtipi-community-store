{
  "$schema": "../dynamic-compose-schema.json",
  "schemaVersion": 2,
  "services": [
    {
      "name": "api",
      "image": "ghcr.io/danny-avila/librechat:v0.8.0@sha256:adcb326f43a971b53df0fbca5f4769c8e56fafbdf834c9dd8c7e4924788f0152",
      "internalPort": 3080,
      "isMain": true,
      "command": ["npm", "run", "backend:dev"],
      "environment": {
        "HOST": "0.0.0.0",
        "MONGO_URI": "mongodb://librechat_mongodb_1:27017/LibreChat",
        "MEILI_HOST": "http://librechat_meilisearch_1:7700",
        "RAG_PORT": "8000",
        "RAG_API_URL": "http://librechat_rag_api_1:8000",
        "CREDS_KEY": "f34be427ebb29de8d88c107a71546019685ed8b241d8f2ed00c3df97ad2566f0",
        "CREDS_IV": "e2341419ec3dd3d19b13a1a87fafcbfb",
        "JWT_SECRET": "16f8c0ef4a5d391b26034086c628469d3f9f497f08163ab9b40137092f2909ef",
        "JWT_REFRESH_SECRET": "eaa5191f2914e30b9387fd84e254e4ba6fc51b4654968a9b0803b456a54b8418"
      },
      "volumes": [
        {
          "hostPath": "/app/data/api/images",
          "containerPath": "/app/client/public/images"
        },
        {
          "hostPath": "/app/data/api/uploads",
          "containerPath": "/app/uploads"
        },
        {
          "hostPath": "/app/data/api/logs",
          "containerPath": "/app/api/logs"
        }
      ],
      "dependsOn": ["mongodb", "rag_api"]
    },
    {
      "name": "mongodb",
      "image": "mongo:8.0.10@sha256:15fb53a5160ebabff5ecade8f8b5d48721b68ea190957a7f35b5b38e8340e62b",
      "command": ["mongod", "--noauth"],
      "volumes": [
        {
          "hostPath": "/app/data/db",
          "containerPath": "/data/db"
        }
      ]
    },
    {
      "name": "meilisearch",
      "image": "getmeili/meilisearch:v1.12.3@sha256:4acfcbbb9e089aa1aac838cfda3fba7f07aaaef044c23da8acbe0ab741400dac",
      "environment": {
        "MEILI_HOST": "http://librechat_meilisearch_1:7700",
        "MEILI_NO_ANALYTICS": "true",
        "MEILI_MASTER_KEY": "DrhYf7zENyR6AlUCKmnz0eYASOQdl6zxH7s7MKFSfFCt"
      },
      "volumes": [
        {
          "hostPath": "/app/data/meilisearch",
          "containerPath": "/meili_data"
        }
      ]
    },
    {
      "name": "vectordb",
      "image": "ankane/pgvector:v0.5.1@sha256:d3a9d8ac27bb7e05e333ef25b634d2625adaa85336ab729954b9e94859bf6fa7",
      "environment": {
        "POSTGRES_DB": "mydatabase",
        "POSTGRES_USER": "myuser",
        "POSTGRES_PASSWORD": "mypassword"
      },
      "volumes": [
        {
          "hostPath": "/app/data/vectordb",
          "containerPath": "/var/lib/postgresql/data"
        }
      ]
    },
    {
      "name": "rag_api",
      "image": "ghcr.io/danny-avila/librechat-rag-api-dev-lite:v0.6.0@sha256:21561e1856e01e4b0de3cc628c7a3de21419398622a0d81cdf0fd262f360ba24",
      "environment": {
        "DB_HOST": "librechat_vectordb_1",
        "RAG_PORT": "8000"
      },
      "dependsOn": ["vectordb"]
    }
  ]
}
